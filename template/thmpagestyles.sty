% ----------
% Styling von Seiten
% zB Abstände zum Papierrand
% ----------

% Laden der Pakete
\RequirePackage{fancyhdr}
\RequirePackage{etoolbox}
\RequirePackage{xcolor}
\RequirePackage{graphicx}

% Blau für Linie in der Kopfzeile
\definecolor{customBlue}{RGB}{29,79,149}

% Maße des Papiers und der Seitenränder
\usepackage[
  paper=a4paper,
  left=3.5cm,
  right=2.5cm,
  bottom=2.0cm,
  top=2cm,
  headheight=56pt,footskip=38pt, % as per the warning by fancyhdr
  includehead,includefoot,
  heightrounded, 
]{geometry}

% Befehle für Linie und Text in der Kopfzeile definieren
\newcommand{\headrulecolor}[1]{\patchcmd{\headrule}{\hrule}{\color{#1}\hrule}{}{}}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}

% pagestyle für das Titelblatt
\fancypagestyle{titlepage}{
    
  % Seitenlayout
  % ACHTUNG diese Maße sind nicht 100% THM konform (aber nah genung dran (hoffenlich))
  \newgeometry{
    left=4cm,
    right=2.5cm,
    bottom=2.0cm,
    top=2cm,
    %
    % schiebt den regulären Seiteninhalt nach unten
    % ansonsten schneiden sich header und Inhalt
    headheight=56pt,
    %
    includehead,includefoot,
  }
  % alle Einstellungen leeren
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  
  % THM, StudiumPlus und Firmen Logo einfügen 
  \lhead{\includegraphics{template/img/thm_header.png}}
  \rhead{\includegraphics{template/img/stdpl_header.png}}
  \lfoot{}
  \rfoot{\includegraphics[width=5.9cm]{\MyLogo}}
}

% Für spezielle Seiten (Inhlatsangabe, neue Kapitel, LitVerz., ...)
\fancypagestyle{plain}{
  \newgeometry{
    left=4cm,
    top=3cm,
    right=1.5cm,
    bottom=2.0cm,
  }
  
  % Kopf- und Fußzeile leeren
  \fancyhf{}
  
  % Kapitel oben links und Seitenzahl unten rechts
  \fancyhead[L]{\nouppercase{\leftmark}}
  \fancyfoot[R]{\thepage}

  % Blauer Streifen oben, kein Streifen unten
  \renewcommand{\headrulewidth}{1pt}
  \renewcommand{\footrulewidth}{0pt}

  \ifdef{\MyLogo}{
    \headrulecolor{customBlue}
    \rhead{\includegraphics[width=4.2cm]{\MyLogo}}
  }
  
}

\fancypagestyle{main}{
  \newgeometry{
    left=4cm,
    top=3cm,
    right=1.5cm,
    % eigentlich nur 2cm, aber die Seitenzahl ist 0.5 cm zu tief
    bottom=2.5cm,
    % .5 inch
    % headsep=1.27cm
  }
  
  % Kopf- und Fußzeile leeren
  \fancyhf{}

  % Kapitel oben links und Seitenzahl unten rechts
  \fancyhead[L]{\nouppercase{\leftmark}}
  \fancyfoot[R]{\thepage}

  % Blauer Streifen oben, kein Streifen unten
  \renewcommand{\headrulewidth}{1pt}
  \renewcommand{\footrulewidth}{0pt}

  \ifdef{\MyLogo}{
    \headrulecolor{customBlue}
    \rhead{\includegraphics[width=4.2cm]{\MyLogo}}
  }
  
}